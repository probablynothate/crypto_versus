<!DOCTYPE html>
<html>
  <!-- Skids This Code Made By hate#1337 and other contributors in the repo ;)-->
  <head>
    <meta property="og:type" content="website"/>
    <meta property="og:title" content="Crypto Versus"/>
    <meta property="og:description" content="A multiplayer versus hacking simulator"/>
    <meta property="og:url" content="https://cry-vs.herokuapp.com/"/>
    <meta property="og:image" content="full thumbnail path"/>
      <link rel="stylesheet" type="text/css" href="css/index.css">
    <title>Crypto Versus</title>
  </head>
  <body>
    <form onsubmit="return login()" autocomplete="off">
      <h1>Login</h1>
      <p id="status_message"></p>
      <input id="username" type="username" placeholder="  Username" maxlength="30" size="30" pattern="^[a-zA-Z0-9\-_.\+<>\(\){}\[\]\|:;~/\\]+" autofocus required/><br/>
      <input id="password" maxlength="30" size="30" type="password" placeholder="  Password" pattern="^[a-zA-Z0-9\-_.\+<>\(\){}\[\]\|:;~/\\]+" required/><br/>
      <input id="submit" type="submit"/>
      <p>Don't have an account?<br/><br/><a id="signup_link">Register</a></p>
    </form>
    <script>
      function login() {
        var username = document.getElementById("username").value;
        var password = document.getElementById("password").value;
        var data = {username,password}

        var statusMessage = document.getElementById("status_message");

        var xhr = new XMLHttpRequest();
        xhr.addEventListener("load", ()=>{
          if(xhr.status === 200) {
            statusMessage.innerText = "Logged in!";
            statusMessage.style.color = "lime";
            statusMessage.style.backgroundColor = "#003300";
            statusMessage.style.borderLeft = "2px solid lime";
          }
          else {
            statusMessage.innerText = xhr.responseText;
            statusMessage.style.color = "red";
            statusMessage.style.backgroundColor = "#330000";
            statusMessage.style.borderLeft = "2px solid red";
          }
        });
        xhr.open("POST", "https://cry-vs.herokuapp.com/login");
        xhr.send(JSON.stringify(data));
        return false;
      }
    </script>
  </body>
</html>
